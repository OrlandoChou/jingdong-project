{"version":3,"file":"js/orderConfirmation.77a6240d.js","mappings":"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","sources":["webpack://jingdong/./src/effects/cartEffect.js","webpack://jingdong/./src/components/ProductList.vue","webpack://jingdong/./src/components/ProductList.vue?004b","webpack://jingdong/./src/components/Toast.vue","webpack://jingdong/./src/components/Toast.vue?44c7","webpack://jingdong/./src/views/orderConfirmation/orderConfirmation.vue","webpack://jingdong/./src/views/orderConfirmation/TopArea.vue","webpack://jingdong/./src/views/orderConfirmation/TopArea.vue?5803","webpack://jingdong/./src/views/orderConfirmation/Order.vue","webpack://jingdong/./src/views/orderConfirmation/Order.vue?af59","webpack://jingdong/./src/views/orderConfirmation/orderConfirmation.vue?3b9e"],"sourcesContent":["// 添加商品到购物车\r\nimport { useStore } from 'vuex'\r\nimport { computed } from 'vue'\r\n\r\nexport const useCommonCartEffect = (shopId) => {\r\n  const store = useStore()\r\n  const cartList = store.state.cartList\r\n  const changeCartItemInfo = (shopId, productId, productInfo, num) => {\r\n    store.commit('changeCartItemInfo', { shopId, productId, productInfo, num })\r\n  }\r\n\r\n  const productList = computed(() => {\r\n    const productList = cartList[shopId]?.productList || []\r\n    const notEmptyProductList = {}\r\n    for (const i in productList) {\r\n      const product = productList[i]\r\n      if (product.count > 0) {\r\n        notEmptyProductList[i] = product\r\n      }\r\n    }\r\n    return notEmptyProductList\r\n  })\r\n\r\n  const shopName = computed(() => {\r\n    const shopName = cartList[shopId]?.shopName || []\r\n    return shopName\r\n  })\r\n\r\n  const calculations = computed(() => {\r\n    const productList = cartList[shopId]?.productList\r\n    const result = { total: 0, price: 0, allChecked: true }\r\n\r\n    if (productList) {\r\n      for (const i in productList) {\r\n        const product = productList[i]\r\n        result.total += product.count\r\n        if (product.check) {\r\n          result.price += product.count * product.price\r\n        }\r\n        if (product.count > 0 && !product.check) {\r\n          result.allChecked = false\r\n        }\r\n      }\r\n    } else {\r\n      result.allChecked = false\r\n    }\r\n    result.price = result.price.toFixed(2)\r\n    return result\r\n  })\r\n\r\n  return { changeCartItemInfo, cartList, calculations, productList, shopName }\r\n}\r\n","<template>\r\n  <div class=\"products\">\r\n    <div class=\"products__title\">{{ shopName }}</div>\r\n    <div class=\"products__list\">\r\n      <div\r\n        class=\"products__item\"\r\n        v-for=\"item in productList\"\r\n        :key=\"item._id\"\r\n      >\r\n        <img class=\"products__item__img\" :src=\"item.imgUrl\" />\r\n        <div class=\"products__item__detail\">\r\n          <h4 class=\"products__item__title\">{{ item.name }}</h4>\r\n          <p class=\"products__item__price\">\r\n            <span class=\"products__item__single\">\r\n              <span class=\"products__item__yen\">&yen;</span>\r\n              {{ item.price }} * {{ item.count }}\r\n            </span>\r\n            <span class=\"products__item__total\">\r\n              <span class=\"products__item__yen\">&yen;</span>\r\n              {{ (item.price * item.count).toFixed(2) }}\r\n            </span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ProductList',\r\n  props: ['productList', 'shopName']\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../style/virables.scss\";\r\n@import \"../style/mixins.scss\";\r\n.products{\r\n  margin:.18rem .18rem .18rem .18rem;\r\n  background: $bgColor;\r\n  &__title{\r\n    padding:.16rem .16rem 0 .16rem;\r\n    font-size: .16rem;\r\n    color: $content-fontColor;\r\n  }\r\n  &__item {\r\n    position: relative;\r\n    display: flex;\r\n    padding: .16rem;\r\n    &__img {\r\n      width: .46rem;\r\n      height: .46rem;\r\n      margin-right: .16rem;\r\n    }\r\n    &__detail {\r\n      flex:1;\r\n    }\r\n    &__title {\r\n      margin: 0;\r\n      line-height: .2rem;\r\n      font-size: .14rem;\r\n      color: $content-fontColor;\r\n      @include ellipsis;\r\n    }\r\n    &__price {\r\n      display: flex;\r\n      margin: .06rem 0 0 0;\r\n      line-height: .2rem;\r\n      font-size: .14rem;\r\n      color: $hightlight-fontColor;\r\n    }\r\n    &__single{\r\n      font-size: .14rem;\r\n    }\r\n    &__total{\r\n      flex:1;\r\n      text-align: right;\r\n      color:$dark-fontColor;\r\n    }\r\n    &__yen {\r\n      font-size: .12rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./ProductList.vue?vue&type=template&id=05bca0a9&scoped=true\"\nimport script from \"./ProductList.vue?vue&type=script&lang=js\"\nexport * from \"./ProductList.vue?vue&type=script&lang=js\"\n\nimport \"./ProductList.vue?vue&type=style&index=0&id=05bca0a9&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-05bca0a9\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"toast\">{{message}}</div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\n\r\nexport default {\r\n  name: 'ToastComponent',\r\n  props: ['message', 'show']\r\n}\r\nexport const useToastEffect = () => {\r\n  const toastData = reactive({\r\n    show: false,\r\n    toastMessage: ''\r\n  })\r\n  const showToast = (message) => {\r\n    toastData.show = true\r\n    toastData.toastMessage = message\r\n    setTimeout(() => {\r\n      toastData.show = false\r\n      toastData.toastMessage = ''\r\n    }, 1000)\r\n  }\r\n  const { show, toastMessage } = toRefs(toastData)\r\n  return { show, toastMessage, showToast }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.toast{\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background: rgba(0,0,0,.35);\r\n  padding: .1rem;\r\n  border-radius: .05rem;\r\n  color: #fff;\r\n  z-index: 1;\r\n}\r\n</style>\r\n","import { render } from \"./Toast.vue?vue&type=template&id=6b1409a4&scoped=true\"\nimport script from \"./Toast.vue?vue&type=script&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=6b1409a4&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6b1409a4\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"wrapper\">\r\n    <TopArea class=\"top__area\"/>\r\n    <ProductList :productList=\"productList\" :shopName=\"shopName\"/>\r\n  </div>\r\n  <Order />\r\n</template>\r\n\r\n<script>\r\nimport { useRoute } from 'vue-router'\r\nimport { useCommonCartEffect } from '../../effects/cartEffect'\r\nimport TopArea from './TopArea.vue'\r\nimport ProductList from '../../components/ProductList.vue'\r\nimport Order from './Order.vue'\r\nexport default {\r\n  name: 'OrderConfirmationView',\r\n  components: { TopArea, ProductList, Order },\r\n  setup () {\r\n    const route = useRoute()\r\n    const shopId = route.params.shopId\r\n    const { productList, shopName } = useCommonCartEffect(shopId)\r\n    return { productList, shopName }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../style/virables.scss\";\r\n@import \"../../style/mixins.scss\";\r\n.wrapper{\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: .49rem;\r\n  background-color: #eee;\r\n  overflow-y: scroll;\r\n}\r\n.top__area{\r\n  margin-bottom: .60rem;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"top\">\r\n    <div class=\"top__bgColor\"></div>\r\n    <div class=\"top__header\">\r\n      <div\r\n        class=\"iconfont top__header__back\"\r\n        @click=\"handleBackClick\"\r\n      >&#xe600;</div>\r\n      <span class=\"top__header__text\">确认订单</span>\r\n    </div>\r\n    <div class=\"top__receiver\">\r\n      <div class=\"top__receiver__title\">收货地址</div>\r\n      <div class=\"top__receiver__address\">合肥工业大学北京校区</div>\r\n      <div class=\"top__receiver__info\">\r\n        <span class=\"top__receiver__info__name\">瑶妹 (先生)</span>\r\n        <span class=\"top__receiver__info__name\">12345654321</span>\r\n      </div>\r\n      <div class=\"iconfont top__receiver__icon\">&#xe600;</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter } from 'vue-router'\r\nexport default {\r\n  name: 'TopArea',\r\n  setup () {\r\n    const router = useRouter()\r\n    const handleBackClick = () => {\r\n      router.back()\r\n    }\r\n    return { handleBackClick }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../style/virables.scss\";\r\n.top{\r\n  height: 1.59rem;\r\n  background: 100% 1.59rem;\r\n  background-image: linear-gradient(0deg, rgba(0,145,255,0.00) 4%, #0091FF 50%);\r\n  &__header{\r\n    position: relative;\r\n    padding-top:.36rem;\r\n    color:$bgColor;\r\n    text-align: center;\r\n    &__back{\r\n      position: absolute;\r\n      font-size: .22rem;\r\n      left: .18rem;\r\n      cursor: pointer;\r\n    }\r\n    &__text{\r\n      font-size: .16rem;\r\n    }\r\n  }\r\n  &__receiver{\r\n    position: absolute;\r\n    left:.18rem;\r\n    right:.18rem;\r\n    top:.86rem;\r\n    height:1.11rem;\r\n    background: $bgColor;\r\n    border-radius: .04rem;\r\n    color: $content-fontColor;\r\n    &__title{\r\n      line-height: .22rem;\r\n      padding:.16rem 0 .14rem .16rem;\r\n      font-size: .16rem;\r\n      font-weight: bold;\r\n    }\r\n    &__address{\r\n      line-height: .2rem;\r\n      padding:0 .4rem 0 .16rem;\r\n      font-size: .14rem;\r\n    }\r\n    &__info{\r\n      padding:0.06rem 0 0 .16rem;\r\n      font-size: .12rem;\r\n      &__name{\r\n        font-size: .12rem;\r\n        color:#666;\r\n        margin-right:.6rem;\r\n        line-height: .18rem;\r\n      }\r\n    }\r\n    &__icon{\r\n      position: absolute;\r\n      right:.16rem;\r\n      top:.46rem;\r\n      font-size: .2rem;\r\n      color:#666;\r\n      transform: rotate(180deg);\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./TopArea.vue?vue&type=template&id=2c7d2a16&scoped=true\"\nimport script from \"./TopArea.vue?vue&type=script&lang=js\"\nexport * from \"./TopArea.vue?vue&type=script&lang=js\"\n\nimport \"./TopArea.vue?vue&type=style&index=0&id=2c7d2a16&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2c7d2a16\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"order\">\r\n    <div class=\"order__price\">\r\n      <span class=\"order__price__text\">实付金额 </span>\r\n      <span class=\"order__price__num\"> &yen;<b>{{ calculations.price }}</b></span>\r\n    </div>\r\n    <div class=\"order__btn\" @click=\"() => handleShowConfirmChange(true)\">提交订单</div>\r\n  </div>\r\n  <div\r\n    class=\"mask\"\r\n    v-show=\"showConfirm\"\r\n    @click=\"() => handleShowConfirmChange(false)\">\r\n    <div class=\"mask__content\">\r\n      <h3 class=\"mask__content__title\">确认要离开收银台</h3>\r\n      <p class=\"mask__content__desc\">请尽快完成支付，否则将被取消</p>\r\n      <div class=\"mask__content__btns\">\r\n        <div\r\n          class=\"mask__content__btn mask__content__btn--first\"\r\n          @click=\"() => handleConfirmOrder(true)\"\r\n        >取消支付</div>\r\n        <div\r\n          class=\"mask__content__btn mask__content__btn--last\"\r\n          @click=\"() => handleConfirmOrder(false)\"\r\n        >确认支付</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Toast v-if=\"show\" :message=\"toastMessage\"/>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useCommonCartEffect } from '../../effects/cartEffect'\r\nimport { get } from '../../utils/request'\r\nimport { useStore } from 'vuex'\r\nimport Toast, { useToastEffect } from '../../components/Toast.vue'\r\n// 下单相关\r\nconst useMakeOrderEffect = (shopName, shopId, productList, calculations) => {\r\n  const router = useRouter()\r\n  const store = useStore()\r\n  const { show, toastMessage, showToast } = useToastEffect()\r\n  const handleConfirmOrder = async (isCanceled) => {\r\n    const products = []\r\n    for (const i in productList.value) {\r\n      const product = productList.value[i]\r\n      products.push({\r\n        id: parseInt(product._id, 10),\r\n        num: product.count,\r\n        imgUrl: product.imgUrl\r\n      })\r\n    }\r\n    try {\r\n      const result = await get('/order')\r\n      if (result) {\r\n        if (!isCanceled) {\r\n          store.commit('clearCartData', shopId)\r\n        }\r\n        router.push({ name: 'OrderListView' })\r\n      } else {\r\n        showToast('没有得到回应')\r\n      }\r\n    } catch (e) {\r\n      showToast('下单失败')\r\n    }\r\n  }\r\n  return { show, toastMessage, handleConfirmOrder }\r\n}\r\n// 显示确认框相关\r\nconst useShoeMaskEffect = () => {\r\n  const showConfirm = ref(false)\r\n  const handleShowConfirmChange = (status) => {\r\n    showConfirm.value = status\r\n  }\r\n  return { showConfirm, handleShowConfirmChange }\r\n}\r\n\r\nexport default {\r\n  name: 'OrderComponent',\r\n  components: { Toast },\r\n  setup () {\r\n    const route = useRoute()\r\n    const shopId = parseInt(route.params.shopId, 10)\r\n    const { calculations, shopName, productList } = useCommonCartEffect(shopId)\r\n    const { show, toastMessage, handleConfirmOrder } = useMakeOrderEffect(shopName, shopId, productList, calculations)\r\n    const { showConfirm, handleShowConfirmChange } = useShoeMaskEffect()\r\n    return {\r\n      show, toastMessage, calculations,\r\n      handleConfirmOrder, showConfirm, handleShowConfirmChange\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../style/virables.scss\";\r\n.order{\r\n  position: absolute;\r\n  display: flex;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  line-height: .49rem;\r\n  height: .49rem;\r\n  background: $bgColor;\r\n  &__price{\r\n    flex:1;\r\n    text-indent: .24rem;\r\n    font-size: .16rem;\r\n    color: $content-fontColor;\r\n  }\r\n  &__btn{\r\n    width:.98rem;\r\n    color:$bgColor;\r\n    background-color: #4FB0F9;\r\n    text-align: center;\r\n    font-size: .14rem;\r\n    &:hover {\r\n      background-color: #4FA0F9;\r\n    }\r\n    a{\r\n      color: $bgColor;\r\n      text-decoration: none;\r\n    }\r\n  }\r\n}\r\n.mask{\r\n  z-index: 1;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, .5);\r\n  &__content{\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    width: 3rem;\r\n    height: 1.56rem;\r\n    background: $bgColor;\r\n    border-radius: .04rem;\r\n    &__title{\r\n      margin: .24rem 0 0 0;\r\n      line-height: .26rem;\r\n      font-size: .18rem;\r\n      color: $content-fontColor;\r\n      text-align: center;\r\n    }\r\n    &__desc{\r\n      margin: .08rem 0 0 0;\r\n      font-size: .14rem;\r\n      color: $medium-fontColor;\r\n      text-align: center;\r\n    }\r\n    &__btns{\r\n      display: flex;\r\n      margin:.24rem .58rem;\r\n    }\r\n    &__btn{\r\n      flex:1;\r\n      width:.8rem;\r\n      line-height: .32rem;\r\n      text-align: center;\r\n      border-radius: .16rem;\r\n      font-size: .14rem;\r\n      &--first{\r\n        margin-right: .12rem;\r\n        border: .01rem solid #4FB0F9;\r\n        color: #4FB0F9;\r\n        cursor: pointer;\r\n        &:hover{\r\n          background: #4FB0F9;\r\n          color: $bgColor;\r\n        }\r\n      }\r\n      &--last{\r\n        margin-left: .12rem;\r\n        background: #4FB0F9;\r\n        color: $bgColor;\r\n        cursor: pointer;\r\n        &:hover{\r\n          background: #4FA0F9;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Order.vue?vue&type=template&id=1aab7cfc&scoped=true\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport \"./Order.vue?vue&type=style&index=0&id=1aab7cfc&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1aab7cfc\"]])\n\nexport default __exports__","import { render } from \"./orderConfirmation.vue?vue&type=template&id=c7427d02&scoped=true\"\nimport script from \"./orderConfirmation.vue?vue&type=script&lang=js\"\nexport * from \"./orderConfirmation.vue?vue&type=script&lang=js\"\n\nimport \"./orderConfirmation.vue?vue&type=style&index=0&id=c7427d02&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c7427d02\"]])\n\nexport default __exports__"],"names":["useCommonCartEffect","shopId","store","useStore","cartList","state","changeCartItemInfo","productId","productInfo","num","commit","productList","computed","notEmptyProductList","i","product","count","shopName","calculations","result","total","price","allChecked","check","toFixed","class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_toDisplayString","$props","_hoisted_3","_Fragment","_renderList","item","key","_id","src","imgUrl","_hoisted_4","_hoisted_5","_hoisted_6","name","_hoisted_7","_hoisted_8","_hoisted_9","_createTextVNode","_hoisted_10","_hoisted_11","props","__exports__","render","message","useToastEffect","toastData","reactive","show","toastMessage","showToast","setTimeout","toRefs","_createVNode","_component_TopArea","_component_ProductList","$setup","_component_Order","_createStaticVNode","onClick","_cache","args","handleBackClick","setup","router","useRouter","back","handleShowConfirmChange","handleConfirmOrder","showConfirm","_createBlock","_component_Toast","_createCommentVNode","useMakeOrderEffect","async","products","value","push","id","parseInt","get","isCanceled","e","useShoeMaskEffect","ref","status","components","Toast","route","useRoute","params","TopArea","ProductList","Order"],"sourceRoot":""}